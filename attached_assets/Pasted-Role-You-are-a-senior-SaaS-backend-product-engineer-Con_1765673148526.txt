Role:
You are a senior SaaS backend & product engineer.

Context:
This is a production-ready SaaS app called Retail Assist.
The app already has:

User signup & login

Admin dashboard

Client dashboard (partially gated)

PayPal subscription plans already created externally ($22 / $45 / $75)

Manual admin approval system


Goal:
Users MUST pay first before their account can be approved and fully activated.
Admin still has final control to approve or suspend accounts.


---

ğŸ¯ REQUIRED FLOW (DO NOT CHANGE ARCHITECTURE)

1ï¸âƒ£ Signup Flow (Client)

When a user signs up:

Create the user with status:


status: "unpaid"
subscription_status: "pending"

User can log in

User CANNOT access dashboard features

Redirect user to Payment Required page



---

2ï¸âƒ£ Payment Page (Critical)

Create or complete: /dashboard/billing/payment-required

This page must:

Show selected plan

Show PayPal subscription payment link

Explain clearly:

> â€œYour account will be activated after payment and admin approval.â€




Plans:

Starter â†’ $22/month

Pro â†’ $45/month

Enterprise â†’ $75/month


âš  DO NOT auto-activate after payment.


---

3ï¸âƒ£ Payment Confirmation (Manual but Structured)

Since PayPal is manual for now:

After payment:

User clicks "I Have Paid"

This updates user record to:


payment_status: "paid"
subscription_status: "awaiting_approval"

Log this event in admin logs



---

4ï¸âƒ£ Admin Approval Flow (Core Requirement)

In Admin Dashboard:

Admin must see:

User plan

Payment status

Signup date

Buttons:

âœ… Approve Account

âŒ Reject / Suspend



When Admin clicks Approve:

status: "active"
subscription_status: "active"
activated_at: timestamp

Only after this:

Client dashboard unlocks

Meta integrations work

AI automation runs



---

5ï¸âƒ£ Route Protection (Enforced)

Update route guards so that:

User Status	Access

unpaid	âŒ dashboard
paid + pending	âŒ dashboard
active	âœ… full access
suspended	âŒ access



---

6ï¸âƒ£ Client Messaging (UX)

Every blocked page should clearly say:

If unpaid â†’ â€œPlease complete paymentâ€

If paid but not approved â†’ â€œAwaiting admin approvalâ€



---

7ï¸âƒ£ Non-NegOTIABLE RULES

âŒ Do NOT auto-approve users

âŒ Do NOT change pricing

âŒ Do NOT add Stripe or new gateways

âŒ Do NOT refactor database structure

âœ… Build on existing admin + auth logic

âœ… Production-ready code only



---

âœ… Final Deliverables

Working pay-before-approval flow

Admin-controlled activation

Clear client UX

Secure gating

No breaking changes